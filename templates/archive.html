{% extends "base.html" %}

{% block title %}アーカイブ - Todoリストアプリ{% endblock %}

{% block heading %}完了したTodo一覧{% endblock %}

{% block content %}
    <div style="text-align: right; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
        <a href="{{ url_for('index') }}" class="btn" style="background: #2b4560; color: white;">未完了のTodoに戻る</a>
        <div style="color: #2f6d80; font-size: 0.9em; font-family: 'Klee One', cursive;">
            完了したタスク数: {{ todos|length }}件
        </div>
    </div>
    
    <div class="todo-list">
        {% if todos %}
            {% for todo in todos %}
                <div class="todo-item" style="border-left-color: #6aa4b0; opacity: 0.8; background: rgba(225, 231, 224, 0.5);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <div class="todo-title" style="text-decoration: line-through; color: #2f6d80; opacity: 0.7;">{{ todo.title }}</div>
                        <span style="background: #6aa4b0; color: white; padding: 4px 12px; border-radius: 12px; font-size: 0.8em; font-weight: 600; font-family: 'Klee One', cursive;">完了</span>
                    </div>
                    {% if todo.content %}
                        <div class="todo-content" style="color: #2f6d80; text-decoration: line-through; opacity: 0.6;">{{ todo.content }}</div>
                    {% endif %}
                    <div class="todo-meta">
                        <div class="todo-date">
                            {% if todo.due_date %}
                                <strong>期日:</strong> {{ todo.due_date }}
                            {% else %}
                                <span style="color: #2f6d80; opacity: 0.7;">期日未設定</span>
                            {% endif %}
                            {% if todo.created_at %}
                                <br><small>作成日時: {{ todo.created_at }}</small>
                            {% endif %}
                        </div>
                        <div class="todo-actions">
                            <form action="{{ url_for('delete', row=todo.row) }}" method="POST" style="display: inline;">
                                <button type="submit" class="btn btn-danger" style="padding: 8px 16px; font-size: 14px;" onclick="return confirm('本当に削除しますか？')">削除</button>
                            </form>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="empty-state">
                <h2>完了したTodoはありません</h2>
                <p>タスクを完了させると、ここに表示されます。</p>
                <a href="{{ url_for('index') }}" class="btn" style="margin-top: 20px;">未完了のTodoに戻る</a>
            </div>
        {% endif %}
    </div>
{% endblock %}

